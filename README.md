1. How to start the project:

Run the following commands:

    ============================================= COMMANDS TO RUN PROJECT =============================================
    - redis-server
    - python3 -m venv <ENV_NAME>
    - source <ENV_NAME>/bin/activate
    - pip3 install -r requirements.txt
    - Migrations for database 
        python3 manage.py makemigrations
        python3 manage.py migrate
    - Run server:
        python3 manage.py runserver

    ============================================= sh FILE TO RUN PROJECT =============================================
    
    use the start.sh file in the root folder
    - sh start.sh

2. Backend Structure :
    Database:
   
        1. User Model: Stores data related to a user
            - username
            - password
            - id : autogenerated
            - email_id
            - mobile_number
        
        2. Passbook: Creates a new entry when a user adds new expense then a passbook entry for each user included in the transactions are created

            - User : user to is being assigned to the user
            - amount : the amount to be paid
            - date : auto added field when a new passbook entry is being made
            - expense: it a foreign key relation to the expn
        3. Expense : This stores information about the expenses

            - payer: who have paid for the expense
            - total_amount_spend: total amount that the users have spent
            - split_type : It is a choice field which have the following values : Equal, Percent, Exact
            - date: Auto added field when a new expense is created

4. API Endpoint :
   
        1. /api/user [GET/POST Request] : This is the endpoint for seeing and creating new users
            Request Body : {
                'username' : '',
                'email_id' : '',
                'password' : '',
                'mobile_number' : ''
            }

        2. /api/create/expense/ [POST Request] : This is the endpoint for creating a new expense and respective passbook entries are also created!
            Request Body : 
                {
                    'expense' : {
                        'split_type':'',
                        'total_amount_spend' : '',
                    }
                    'user_ids' : {},
                    'percentage_user_split' : [
                        'user_id':'',
                        'percentage': ''
                    ],
                    'excat_data_split' : [
                        {
                            'user_id':'',
                            'amount' : ''
                        }
                    ]
                }

        3. /api/passbook/ [GET Request] : List all the entries present in passbook
            Also you can pass additional query parameter simplfy true/false, by default it's false
            True : if you want a simplified view of your expenses 
        4. /api/passbook/user_id/ [GET Request] : List all the entries realted to a user in passbook model
        5. /api/expense/ [GET Request] : List all the expense in the Expense model
        6. /api/expense/user_id/ [GET Request] : List all the expenses done by a user.

6. Working :
   
    When an Expense is added following things happens :
   
        1. A new entry in the expense model is created.
        2. Based on the choice selected, particular passbook entries are made
        3. Mails have been sent to the users who have been the part of the  expense
    
    - Emails are sent using celery hence they are Asynchronously sent

    - A weekly task is being scheduled using celery, which sends email to all the users in the system

8. Important Point :

    - Python >= 3.9.6, must be installed in the system to run the this project
    - Make sure to have redis installed in the system:
        - mac installation : 
            1. brew install redis
        - Start redis (mac) : 
            redis-server
        - Linux (Ubuntu) installation : 
            1. sudo apt-get update 
            2. sudo apt-get install redis-server
        - Start Redis (Linux):
            sudo systemctl status redis-server or sudo systemctl start redis-server

        
